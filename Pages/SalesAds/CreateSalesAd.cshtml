@page
@using LTKGMaster.Models
@model LTKGMaster.Pages.SalesAds.CreateSalesAdModel
@{
}
<body>
    <form method="Post" enctype="multipart/form-data">
    <h3>Opret sales annonce</h3>
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="mb-3">
            <label asp-for="ProductToAdd.Type"></label>
            <select asp-for="ProductToAdd.Type" class="form-control" asp-items="Html.GetEnumSelectList<ProductType>()"></select>
            <span class="text-danger" asp-validation-for="ProductToAdd.Type"></span>
        </div>
    <div class="mb-3">
        <input type="hidden" asp-for="NewSalesAd.UserId" value ="@int.Parse(User.FindFirst("Id").Value)" />
    </div>
    <div class="mb-3">
        <label asp-for="NewSalesAd.Title"></label>
        <input type="text" asp-for="NewSalesAd.Title" class="form-control" />
        <span class="text-danger" asp-validation-for="NewSalesAd.Title"></span>
    </div>
    <div class="mb-3">
        <label asp-for="ProductToAdd.Description"></label>
            <input type="text" asp-for="ProductToAdd.Description" class="form-control" />
            <span class="text-danger" asp-validation-for="ProductToAdd.Description"></span>
    </div>
    <div class="mb-3">
        <label asp-for="ProductToAdd.Year"></label>
            <input type="text" asp-for="ProductToAdd.Year" class="form-control" />
            <span class="text-danger" asp-validation-for="ProductToAdd.Year"></span>
    </div>
    <div class="mb-3">
            <label asp-for="ProductToAdd.Brand"></label>
            <input type="text" asp-for="ProductToAdd.Brand" class="form-control" />
            <span class="text-danger" asp-validation-for="ProductToAdd.Brand"></span>
    </div>
    <div class="mb-3">
            <label asp-for="ProductToAdd.Model"></label>
            <input type="text" asp-for="ProductToAdd.Model" class="form-control" />
            <span class="text-danger" asp-validation-for="ProductToAdd.Model"></span>
    </div>
    <div class="mb-3">
            <label asp-for="ProductToAdd.Price"></label>
            <input type="text" asp-for="ProductToAdd.Price" class="form-control" />
            <span class="text-danger" asp-validation-for="ProductToAdd.Price"></span>
    </div>
        <div class="mb-3">
            <input type="file" asp-for="ProductImages" id="imageInput" multiple accept="image/*" />
            <span class="text-danger" asp-validation-for="ProductImages"></span>
        </div>
    <div class="mb-2">
        <input type="submit" class="btn btn-primary" value="Create Ad" />
    </div>
    </form>
</body>

<script>
    const imageInput = document.getElementById('imageInput');
    const errorMessage = document.getElementById('errorMessage');

    // Validate file selection on form submission
    document.querySelector('form').addEventListener('submit', (event) => {
        const fileCount = imageInput.files.length;

        if (fileCount < 1 || fileCount > 9) {
            // Show error message
            errorMessage.style.display = 'block';
            event.preventDefault(); // Prevent form submission
        } else {
            // Hide error message
            errorMessage.style.display = 'none';
        }
    });
</script>



